export { themes } from './themes'
import { Light } from './layout'
import { Appear, Image } from '@mdx-deck/components'
import { Invert } from 'mdx-deck/layouts'
import { Notes } from 'mdx-deck'

# Building web applications with Node, GraphQL, & React üöÄ

Jordan Overbye / @jordanoverbye

---

<Light>
  <img style={{ maxWidth: '30vw' }} src="/assets/thinkmill.png" />
</Light>

---

<Light>
  <img style={{ maxWidth: '60vw' }} src="/assets/reactconf-au.jpg" />
</Light>

---

# React Select

# Emotion

# Keystone

... many more

---

Need something here..

---

# Building web applications is hard

# ü§π

---

- Business requirements

---

- Authentication / access control
- Data storage
- APIs
- Content management
- Documentation
- Multiple platforms (web, ios, android)

### ... just to name a few:

---

- Performance
- Accessibility

---

- Devs need üíó too

---

- Keystone v5

- NextJS

- Apollo

---

# KRAP üí©

### (K)eystone (R)eact (AP)ollo

---

- GraphQL API
- Admin UI
- SSR React App

---

# A scalable platform and CMS to build Node.js applications

### `schema => ({ AdminUI, GraphQL })`

---

# Open source

---

# Front-end agnostic

---

# BYO Database

### Postgres, MongoDB

---

# Deploy anywhere

---

```js
const { Keystone } = require('@keystone-alpha/keystone')
const { MongooseAdapter } = require('@keystone-alpha/adapter-mongoose')
const { Text } = require('@keystone-alpha/fields')
const { GraphQLApp } = require('@keystone-alpha/app-graphql')
const { AdminUIApp } = require('@keystone-alpha/app-admin-ui')

const keystone = new Keystone({
  name: 'Example App',
  adapter: new MongooseAdapter()
})

keystone.createList('Todo', {
  schemaDoc: 'A list of tasks which need to be done',
  fields: {
    task: {
      type: Text,
      schemaDoc: 'A task that needs to be done',
      isRequired: true
    }
  }
})

module.exports = {
  keystone,
  apps: [new GraphQLApp(), new AdminUIApp()]
}
```

---

```graphql
type Todo {
  id: ID
  task: String
}

type Mutation {
  createTodo(..): Todo
  updateTodo(..): Todo
  deleteTodo(..): Todo
}

type Query {
  allTodos(..): [Todo]
  Todo(..): Todo
}
```

---

# Calendar Day, Checkbox, Cloudinary Image, Color, DateTime, Decimal, File, Float, Integer, Embed, Password, Relationship, Select, Slug, Text, Unsplash, Url, Uuid

---

```js
module.exports = {
  keystone,
  apps: [
    new GraphQLApp(),
    new AdminUIApp()
    new StaticApp(
      path: '/',
      src: 'public',
      fallback: 'index.html',
    )
  ]
}
```

---

```js
module.exports = {
  keystone,
  apps: [
    new GraphQLApp(),
    new AdminUIApp()
    new NextApp({ dir: 'app' }),
  ]
}
```

---

# NextJS

---

# `npx create-next-app`

---

# Universal rendering üöÄ

### Server side rendering (SSR)

### Single page application (SPA)

---

# Dynamic, file based routing

```sh
pages/
‚îú‚îÄ‚îÄ about.js
‚îú‚îÄ‚îÄ contact.js
‚îú‚îÄ‚îÄ project/
‚îÇ   ‚îú‚îÄ‚îÄ [project-id].js
```

---

# Automatic code splitting per page ‚ö°Ô∏è

---

# Static exports

---

# It's just React ‚öõÔ∏è

---

```jsx
import React from 'react'
import fetch from 'isomorphic-unfetch'

export default function Page({ stars }) {
  return <div>Github stars: {stars}</div>
}

Page.getInitialProps = async ({ req }) => {
  const res = await fetch('https://api.github.com/repos/zeit/next.js')
  const json = await res.json()
  return { stars: json.stargazers_count }
}
```

---

# What about GraphQL?

---

```
const url = "https://my-graphql-server.com";

const query = `
  query {
    allTodos {
      task
    }
  }
`;

const options = {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ query })
};

fetch(url, options)
  .then(res => res.json())
  .then(console.log)
  .catch(console.error);
```

---

```
import { request } from 'graphql-request'

const query = `{
  allTodos {
    task
  }
}`

request('https://my-graphql-server.com', query).then(data =>
  console.log(data)
)

```

---

# Apollo

---

```jsx
import { useQuery } from '@apollo/react-hooks'
import gql from 'graphql-tag'

const GET_GREETING = gql`
  query getGreeting($language: String!) {
    greeting(language: $language) {
      message
    }
  }
`

function Hello() {
  const { loading, error, data } = useQuery(GET_GREETING, {
    variables: { language: 'english' }
  })

  if (loading) return <p>Loading</p>

  return <h1>Hello {data.greeting.message}!</h1>
}
```

---

# Thanks üëã üê∂ üéâ
